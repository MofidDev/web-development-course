## نصب گیت در کامپیوتر

- https://git-scm.com

## شرکت‌های ارائه‌دهنده خدمات گیت

- https://github.com
- https://gitlab.com
- https://bitbucket.org

## ثبت‌نام در گیت‌هاب

- http://github.com
- https://github.com/join
- https://github.com/explore

## گروه توسعه‌دهندگان مفید

- https://github.com/MofidDev
- MofidDev@gmail.com

<div class="card text-white bg-success mb-3">
  <div class="card-body">
    <h6 class="card-title">تکلیف</h6>
    <p class="card-text">
   در سایت گیت‌هاب ثبت‌نام کنید و نام کاربری (username) خود را به همراه نام و نام خانوادگی تان به آدرس ایمیل گروه توسعه‌دهندگان مفید ایمیل کنید.
    </p>
  </div>
</div>

## کانفیگ اولیه گیت در سیستم

- ```bash
  git config --global user.email "you@example.com"
  ```
- ```bash
  git config --global user.name "Your Name"
  ```

## گیت به چه دردی می‌خورد؟

- می‌توانید به صورت تیمی روی یک پروژه کار کنید
- می‌توانید نسخه‌های مختلف یک پروژه را مدیریت کنید
- می‌توانید منشا اشکالات را پیدا کنید
- می‌توانید به چند نسخه قبل تر پروژه باز گردید
- می‌توانید نسخه‌های پایدار و باکیفیت پروژه را برچسب گذاری کنید
- می‌توانید تغییرات پروژه را با سرعت بدست دیگران برسانید
- می‌توانید تاریخچه تغییرات پروژه را مرور کنید
- می‌توانید از پروژه‌های خود نسخه پشتیبان تهیه کنید

## مفهوم repository

- در گیت همه چیز با یک مخزن شروع می‌شود. معمولا پوشه اصلی پروژه را بعنوان مخزن آن پروژه در نظر میگیریم. اما حتما باید به گیت اعلام کنیم که کدام پوشه را بعنوان مخزن درنظر بگیرد.

  - ```bash
    git init
    ```

- برای دفعات بعدی وقتی که قبلا مخزن ایجاد شده می‌توانید یک کلون از مخزن تهیه کنید و کار با گیت را ادامه دهید.

  - ```bash
    git clone https://github.com/MofidDev/git-tutorial.git
    ```

## مفهوم staging

- وقتی مخزن آماده شد، باید هر فایلی که لازم است گیت تغییرات آن را رهگیری کند به گیت اعلام کنیم تا حواسش به آن فایل‌ها باشد.

- در ادبیات گیت به این فایل ها که گیت حواسش به تغییرات آن ها هست را tracked files می‌گویند.

- در ادبیات گیت به تغییراتی که قرار است در کامیت بعدی بیایند را staged changes می‌گویند.

- برای بردن فایل‌ها به استیج می‌توانیم به روش‌های زیر عمل کنیم.

  - ```bash
    git add a.html
    ```

  - ```bash
    git add -A
    ```

  - ```bash
    git add .
    ```

## مفهوم commit

- در گیت باید تغییرات را ثبت یا کامیت کنیم. در واقع به یک مجموعه تغییرات یک کامیت می‌گوییم. باید برای هر کامیت یک توضیح یا پیام هم ثبت کنیم که مشخص می‌کند علت این تغییرات چه بوده است یا این تغییرات چه کاری انجام می‌دهد.

- ```bash
  git commit -m "initial commit"
  ```

## کارهای پایه در گیت

- <img class="img-fluid" src="./assets/image/git_basic_usage.jpg" />

## مفهوم branch

- بدون برنچ یا شاخه، همیشه به صورت خطی پروژه را جلو می‌بریم. اما وقتی از برنچ‌ها استفاده می‌کنیم اعضای تیم یا خودمان می‌توانیم به صورت موازی روی قسمت‌های مختلف کار کنیم. برنچ ممکن است یک نسخه خاص از پروژه باشد یا مثلا اضافه کردن یک قابلیت خاص به پروژه.

- وقتی یک مخزن با git init تعریف می‌شود معمولا برنچ پیش‌فرض master می‌باشد. البته این موضوع بسته به تنظیمات گیت ممکن است فرق کند.

- برنچ‌ها ممکن است در لوکال یا در ریموت تعریف شوند و بروزرسانی برنچ‌ها در لوکال یا در ریموت بر عهده کاربر است.

## مفهوم remote

- می‌دانیم گیت یک ابزار کنترل نسخه توزیع شده است. یعنی باید بتوانیم از کامپیوترهای مختلف روی پروژه کار کنیم. برای این کار لازم است یک یا چند مخزن بعنوان ریموت تعریف شود تا گیت آخرین تغییرات را به آنجا بفرستد و آخرین تغییرات را از آنجا دریافت کنید.

- البته درمورد اینکه ممکن است ناهماهنگی‌ها و درگیری‌های فنی از بابت همگام‌سازی افراد بوجود آید باید در ادامه صحبت کنیم. اما مفهوم اصلی ریموت این است که یک یا چند آدرس را به گیت برای ارسال و دریافت تغییرات اعلام کنیم.

- <img class="img-fluid" src="./assets/image/git_upstream.jpg" />

## مفهوم tag

- می‌توانیم به نسخه‌های مختلف نرم‌افزار در روند توسعه برچسب بزنیم تا بعدا به سرعت آن‌ها را پیدا کنیم. از این قابلیت معمولا برای مشخص کردن ورژن‌های مختلف نرم‌افزار استفاده می‌شود تا اگر بعدا لازم شد به یک نسخه خاص برگردیم این کار امکان پذیر باشد.

## مفهوم push

- در گیت می‌توانیم تعدادی تغییرات ثبت شده - کامیت‌ها یا تگ‌ها - را به یک ریموت پوش کنیم یا بفرستیم که ریموت از تغییرات لوکال ما مطلع شود.

## مفهوم pull

- آخرین تغییرات از ریموت دریافت می‌شود و با فایل‌های لوکال مرج می‌شود.
- با این کار مطمئن می‌شویم که آخرین تغییرات ریموت را در لوکال دریافت کرده‌ایم.

## مفهوم submodule

- وقتی می‌خواهیم یک مخزن داشته باشیم و در یکی از پوشه‌های آن به یک مخزن گیت دیگر ارجاع دهیم باید به گیت اعلام کنیم که جداگانه فایل های مخزن child را رهگیری نکند بلکه کل آن‌ها را بعنوان یک زیرماژول درنظر بگیرد.

## قراردادهای ضمنی در گیت

- <img class="img-fluid" src="./assets/image/git_conventions.jpg" />

## راهنمای گیت

- چون گیت خیلی خیلی وسیع است و امکانات زیادی دارد وقتی سوالی برایتان پیش می‌آید درموردش جستجو کنید یا راهنمای گیت را مطالعه کنید.

- ```bash
  git help diff
  ```

## بررسی وضعیت

- چگونه وضعیت فعلی یک مخزن گیت را ببینیم؟

  - ```bash
    git status
    ```

- چگونه تغییراتی که هنوز استیج نشده است را ببینیم؟

  - ```bash
    git diff
    ```

- چگونه تغییراتی که استیج شده است را ببینیم؟

  - ```bash
    git diff --staged
    ```

- چگونه لیست فایل‌هایی که تغییر کرده هنوز استیج نشده است را ببینیم؟

  - ```bash
    git diff --name-status
    ```

- چگونه تاریخچه کارها در گیت را ببینیم؟

  - ```bash
    git log
    ```
  - ```bash
    git log --oneline
    ```
  - ```bash
    git reflog
    ```

- چگونه بین HEAD و تغییرات جاری مقایسه کنیم؟

  - ```bash
    git diff HEAD
    ```

- چگونه جزئیات یک کامیت یا تگ خاص را ببینیم؟

  - ```bash
    git show HEAD
    ```

  - ```bash
    git show tag1
    ```

  - ```bash
    git show b6fd8faee78523acdd50e4f60c0c5c70e9d8de4c
    ```

- چگونه لیست کامیت‌های در انتظار پوش را ببینیم؟

  - ```bash
    git cherry -v
    ```

## کار با برنچ‌ها

- چگونه یک برنچ جدید در گیت بسازیم؟

  - ```bash
    git branch multilingual-feature
    ```

- چگونه بین برنچ‌های مختلف جا‌به‌جا شویم؟

  - ```bash
    git checkout master
    git checkout multilingual-feature
    ```

- چگونه لیست همه‌ی برنچ‌های تعریف شده را ببینیم؟

  - ```bash
    git branch -a -v
    ```

- چگونه بین دو برنج مقایسه کنیم؟

  - ```bash
    git diff branch1 branch2
    ```

- چگونه دو برنچ را مرج کنیم؟

  - ```bash
    git checkout master
    git merge multilingual-feature
    ```

- چگونه یک برنج قدیمی را حذف کنیم؟

  - ```bash
    git branch -d multilingual-feature
    git push origin --delete multilingual-feature
    ```

## کار با ریموت‌ها

- چگونه یک ریموت جدید برای مخزن فعلی تعریف کنیم؟

  - ```bash
    git remote add origin https://github.com/MofidDev/git-tutorial.git
    ```

- چگونه آدرس یک ریموت را تغییر دهیم؟

  - ```bash
    git remote set-url origin https://github.com/NewMofidDev/new-git-tutorial.git
    ```

- چگونه یک ریموت را حذف کنیم؟

  - ```bash
    git remote rm upstream
    git remote rm origin
    ```

- چگونه همه‌ی ریموت‌های تعریف شده ببینیم؟

  - ```bash
    git remote -v
    ```

## کار با تگ‌ها

- چگونه برچسب یا تگ بزنیم؟

  - ```bash
    git tag -a v1.2 -m "prod 1.2"
    ```

- چگونه تگ‌های لوکال را به ریموت بفرستیم؟

  - ```bash
    git push origin --tags
    ```

- چگونه بین دو تگ مقایسه کنیم؟ مقایسه خط به خط همه تغییرات

  - ```bash
    git diff tag1 tag2
    ```

- چگونه بین دو تگ مقایسه کنیم؟ مقایسه خط به خط تغییرات یک فایل خاص

  - ```bash
    git diff tag1 tag2 -- some/file/name
    ```

- چگونه بین دو تگ مقایسه کنیم؟ لیست فایل‌های تغییر یافته

  - ```bash
    git diff tag1 tag2 --stat
    ```

- چگونه بین دو تگ مقایسه کنیم؟ مقایسه لاگ تغییرات

  - ```bash
    git log tag1..tag2
    ```

## مشارکت در یک پروژه اپن سورس

- مرحله اول مشارکت

  - fork me on github: برای شروع باید به مخزن پروژه در گیت‌هاب یا گیت‌لب مراجعه کنید و اصطلاحاً آن مخزن را fork کنید. با این کار یک کپی از همین مخزن در اکانت شما ایجاد می‌شود.

- مرحله دوم مشارکت

  - تغییراتی که به نظرتان لازم است را اعمال کنید و این تغییرات را به مخزن فورک شده پوش کنید.

- مرحله سوم مشارکت

  - برای مالک مخزن اصلی درخواست merge request یا pull request ارسال کنید تا تغییرات شما را بررسی و به مخزن اصلی اضافه کند.

- push چیکار می‌کند؟ تغییرات یک برنچ لوکال را به برنچ متناظر در ریموت ارسال می‌کنیم.

  - ```bash
    git push origin master
    git push -u origin master
    ```

- fetch چیکار می‌کند؟ بدون مرج کردن، تغییرات ریموت را در لوکال دریافت می‌کنیم.

  - ```bash
    git fetch
    ```

- pull چیکار می‌کند؟ اول تغییرات ریموت را در لوکال دریافت می‌کنیم و بعد این تغییرات با برنچ فعلی مرج می‌شود.

  - ```bash
    git fetch && git merge
    ```

- چطور conflict بین ریموت و لوکال را برطرف کنیم؟
  - به سختی !
  - گیت هنگام مرج کردن سعی می‌کند خودش به خوبی کار مرج را انجام دهد اما اگر دو نفر یک خط یکسان از یک برنچ را تغییر داده باشند ممکن است لازم باشد یک نفر داور بیاید و مشخص کند کدام تغییر درست است و به عبارتی درگیری یا conflict را به صورت دستی حل و فصل کند.

## حذف فایل در گیت

- ```bash
  git rm test.html
  ```

## بازگردانی تغییرات

- چگونه تغییرات staged را unstaged کنیم؟

  - ```bash
    git reset notes/n1.md
    ```

- چگونه تغییرات unstaged را revert کنیم؟

  - ```bash
    git checkout -- notes/n1.md
    ```

- چگونه آخرین کامیت را ریست کنیم؟ اگر می‌خواهید تغییرات حفظ شود

  - ```bash
    git reset --soft HEAD^
    ```

- چگونه آخرین کامیت را ریست کنیم؟ اگر نمی‌خواهید تغییرات حفظ شود

  - ```bash
    git reset --hard HEAD^
    ```

- چگونه به یک نسخه خاص برگردیم؟

  - ```bash
    git reset --hard e870e41
    ```

<div class="card text-white bg-success mb-3">
  <div class="card-body">
    <h6 class="card-title">تکلیف</h6>
    <p class="card-text">
    <ol>
      <li>یک مخزن عمومی در گیت‌هاب با اکانت خودتان تعریف کنید.</li>
      <li>به این مخزن سه فایل html اضافه کنید که هر فایل شامل عنوان و متن یک خبر باشد.</li>
      <li>برای تهیه خبر می‌توانید به سایت‌های خبرگزاری مراجعه کنید.</li>
      <li>اسم مخزن را به شکل <kbd>news-project</kbd> تعریف کنید.</li>
      <li>اسم فایل‌های html را به شکل روبه‌رو تعریف کنید: <kbd>n1.html</kbd> <kbd>n2.html</kbd> <kbd>n3.html</kbd></li>
      <li>آدرس مخزن را در تکلیف مربوطه در LMS ثبت کنید.</li>
    </ol>
    </p>
  </div>
</div>

<div class="card text-white bg-success mb-3">
  <div class="card-body">
    <h6 class="card-title">تکلیف</h6>
    <p class="card-text">
    <ol>
      <li>مخزن <kbd>git-tutorial</kbd> در صفحه گروه توسعه‌دهندگان مفید را fork کنید.</li>
      <li>در این مخزن یک پوشه بنام hw1 وجود دارد. شما باید یک پوشه داخل hw1 ایجاد کنید که نام این پوشه برابر نام کاربری شما در گیت‌هاب باشد و سپس یک فایل html را به آن اضافه کنید. مثلا اگر نام کاربری شما HoseinGhanbari باشد باید فایل خود را در آدرس <kbd>hw1/HoseinGhanbari/index.html</kbd> قرار دهید.</li>
      <li>اسم فایل html باید به صورت index.html باشد.</li>
      <li>در این فایل html باید نام و نام خانوادگی خود را قرار دهید</li>
      <li>در نهایت تغییرات لوکال خود را به ریموت منتقل کنید.</li>
      <li>حالا یک درخواست pull request یا merge request در مخزن اصلی ثبت کنید.</li>
      <li>در سامانه LMS آدرس مخزن فورک شده در اکانت خودتان را در تکلیف مربوطه ثبت کنید.</li>
    </ol>
    </p>
  </div>
</div>

## برای مطالعه بیشتر

- https://www.atlassian.com/git/tutorials
- https://try.github.io
- https://docs.github.com
- https://guides.github.com
- https://git-scm.com/docs
- https://git-scm.com/docs/gittutorial
- http://onlywei.github.io/explain-git-with-d3
- https://git-school.github.io/visualizing-git
- https://marklodato.github.io/visual-git-guide/index-en.html
- https://backlog.com/git-tutorial/
- pgp (pretty good privacy)
- git blame
- git bisect
